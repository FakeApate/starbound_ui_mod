<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>status</title>
        <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

</style>
        
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item {
    list-style-type: none;
}

.task-list-item-checkbox {
    margin-left: -20px;
    vertical-align: middle;
    pointer-events: none;
}
</style>
        
    </head>
    <body class="vscode-body vscode-light">
        <h1 id="status">status</h1>
<p>The <code>status</code> table relates to the status controller attached to an entity. It is available in:</p>
<ul>
<li>monsters</li>
<li>npcs</li>
<li>status effects</li>
<li>companion system scripts</li>
<li>quest scripts</li>
<li>tech</li>
<li>primary status scripts for: player, monster, npc</li>
</ul>
<hr>
<h4 id="json-statusstatuspropertystring-name-json-default"><code>Json</code> status.statusProperty(<code>String</code> name, <code>Json</code> default)</h4>
<p>Returns the value assigned to the specified status property. If there is no value set, returns default.</p>
<hr>
<h4 id="void-statussetstatuspropertystring-name-json-value"><code>void</code> status.setStatusProperty(<code>String</code> name, <code>Json</code> value)</h4>
<p>Sets a status property to the specified value.</p>
<hr>
<h4 id="float-statusstatstring-statname"><code>float</code> status.stat(<code>String</code> statName)</h4>
<p>Returns the value for the specified stat. Defaults to 0.0 if the stat does not exist.</p>
<hr>
<h4 id="bool-statusstatpositivestring-statname"><code>bool</code> status.statPositive(<code>String</code> statName)</h4>
<p>Returns whether the stat value is greater than 0.</p>
<hr>
<h4 id="liststring-statusresourcenames"><code>List&lt;String&gt;</code> status.resourceNames()</h4>
<p>Returns a list of the names of all the configured resources;</p>
<hr>
<h4 id="bool-statusisresourcestring-resourcename"><code>bool</code> status.isResource(<code>String</code> resourceName)</h4>
<p>Returns whether the specified resource exists in this status controller.</p>
<hr>
<h4 id="float-statusresourcestring-resourcename"><code>float</code> status.resource(<code>String</code> resourceName)</h4>
<p>Returns the value of the specified resource.</p>
<hr>
<h4 id="bool-statusresourcepositivestring-resourcename"><code>bool</code> status.resourcePositive(<code>String</code> resourceName)</h4>
<p>Returns whether the value of the specified resource is greater than 0.</p>
<hr>
<h4 id="void-statussetresourcestring-resourcename-float-value"><code>void</code> status.setResource(<code>String</code> resourceName, <code>float</code> value)</h4>
<p>Sets a resource to the specified value.</p>
<hr>
<h4 id="void-statusmodifyresourcestring-resourcename-float-value"><code>void</code> status.modifyResource(<code>String</code> resourceName, <code>float</code> value)</h4>
<p>Adds the specified value to a resource.</p>
<hr>
<h4 id="float-statusgiveresourcestring-resourcename-float-value"><code>float</code> status.giveResource(<code>String</code> resourceName, <code>float</code> value)</h4>
<p>Adds the specified value to a resource. Returns any overflow.</p>
<hr>
<h4 id="bool-statusconsumeresourcestring-resourcename-float-amount"><code>bool</code> status.consumeResource(<code>String</code> resourceName, <code>float</code> amount)</h4>
<p>Tries to consume the specified amount from a resource. Returns whether the full amount was able to be consumes. Does not modify the resource if unable to consume the full amount.</p>
<hr>
<h4 id="bool-statusoverconsumeresourcestring-resourcename-float-amount"><code>bool</code> status.overConsumeResource(<code>String</code> resourceName, <code>float</code> amount)</h4>
<p>Tries to consume the specified amount from a resource. If unable to consume the full amount, will consume all the remaining amount. Returns whether it was able to consume any at all of the resource.</p>
<hr>
<h4 id="bool-statusresourcelockedstring-resourcename"><code>bool</code> status.resourceLocked(<code>String</code> resourceName)</h4>
<p>Returns whether the resource is currently locked.</p>
<hr>
<h4 id="void-statussetresourcelockedstring-resourcename-bool-locked"><code>void</code> status.setResourceLocked(<code>String</code> resourceName, <code>bool</code> locked)</h4>
<p>Sets a resource to be locked/unlocked. A locked resource cannot be consumed.</p>
<hr>
<h4 id="void-statusresetresourcestring-resourcename"><code>void</code> status.resetResource(<code>String</code> resourceName)</h4>
<p>Resets a resource to its base value.</p>
<hr>
<h4 id="void-statusresetallresources"><code>void</code> status.resetAllResources()</h4>
<p>Resets all resources to their base values.</p>
<hr>
<h4 id="float-statusresourcemaxstring-resourcename"><code>float</code> status.resourceMax(<code>String</code> resourceName)</h4>
<p>Returns the max value for the specified resource.</p>
<hr>
<h4 id="float-statusresourcepercentagestring-resourcename"><code>float</code> status.resourcePercentage(<code>String</code> resourceName)</h4>
<p>Returns the percentage of max that the resource is currently at. From 0.0 to 1.0.</p>
<hr>
<h4 id="void-statussetresourcepercentagestring-resourcename-float-value"><code>void</code> status.setResourcePercentage(<code>String</code> resourceName, <code>float</code> value)</h4>
<p>Sets a resource to a percentage of the max value for the resource. From 0.0 to 1.0.</p>
<hr>
<h4 id="void-statusmodifyresourcepercentagestring-resourcename-float-value"><code>void</code> status.modifyResourcePercentage(<code>String</code> resourceName, <code>float</code> value)</h4>
<p>Adds a percentage of the max resource value to the current value of the resource.</p>
<hr>
<h4 id="jsonarray-statusgetpersistenteffectsstring-effectcategory"><code>JsonArray</code> status.getPersistentEffects(<code>String</code> effectCategory)</h4>
<p>Returns a list of the currently active persistent effects in the specified effect category.</p>
<hr>
<h4 id="void-statusaddpersistenteffectstring-effectcategory-json-effect"><code>void</code> status.addPersistentEffect(<code>String</code> effectCategory, <code>Json</code> effect)</h4>
<p>Adds a status effect to the specified effect category.</p>
<hr>
<h4 id="void-statusaddpersistenteffectsstring-effectcategory-jsonarray-effects"><code>void</code> status.addPersistentEffects(<code>String</code> effectCategory, <code>JsonArray</code> effects)</h4>
<p>Adds a list of effects to the specified effect category.</p>
<hr>
<h4 id="void-statussetpersistenteffectsstring-effectcategory-jsonarray-effects"><code>void</code> status.setPersistentEffects(<code>String</code> effectCategory, <code>JsonArray</code> effects)</h4>
<p>Sets the list of effects of the specified effect category. Replaces the current list active effects.</p>
<hr>
<h4 id="void-statusclearpersistenteffectsstring-effectcategory"><code>void</code> status.clearPersistentEffects(<code>String</code> effectCategory)</h4>
<p>Clears any status effects from the specified effect category.</p>
<hr>
<h4 id="void-statusclearallpersistenteffects"><code>void</code> status.clearAllPersistentEffects()</h4>
<p>Clears all persistent status effects from all effect categories.</p>
<hr>
<h4 id="void-statusaddephemeraleffectstring-effectname-float-duration-entityid-sourceentity"><code>void</code> status.addEphemeralEffect(<code>String</code> effectName, [<code>float</code> duration], [<code>EntityId</code> sourceEntity])</h4>
<p>Adds the specified unique status effect. Optionally with a custom duration, and optionally with a source entity id accessible in the status effect.</p>
<hr>
<h4 id="void-statusaddephemeraleffectsjsonarray-effects-entityid-sourceentity"><code>void</code> status.addEphemeralEffects(<code>JsonArray</code> effects, [<code>EntityId</code> sourceEntity])</h4>
<p>Adds a list of unique status effects. Optionally with a source entity id.</p>
<p>Unique status effects can be specified either as a string, &quot;myuniqueeffect&quot;, or as a table, {effect = &quot;myuniqueeffect&quot;, duration = 5}. Remember that this function takes a <code>list</code> of these effect descriptors. This is a valid list of effects: { &quot;myuniqueeffect&quot;, {effect = &quot;myothereffect&quot;, duration = 5} }</p>
<hr>
<h4 id="void-statusremoveephemeraleffectstring-effectname"><code>void</code> status.removeEphemeralEffect(<code>String</code> effectName)</h4>
<p>Removes the specified unique status effect.</p>
<hr>
<h4 id="void-statusclearephemeraleffects"><code>void</code> status.clearEphemeralEffects()</h4>
<p>Clears all ephemeral status effects.</p>
<hr>
<h4 id="listpairdamagenotification-unsigned-statusdamagetakensinceunsigned-since--0"><code>List&lt;pair&lt;DamageNotification&gt;&gt;</code>, <code>unsigned</code> status.damageTakenSince([<code>unsigned</code> since = 0]])</h4>
<p>Returns two values:</p>
<ul>
<li>A list of damage notifications for the entity's damage taken since the specified heartbeat.</li>
<li>The most recent heartbeat to be passed into the function again to get the damage notifications taken since this function call.</li>
</ul>
<p>Example:</p>
<pre><code class="language-lua">_,lastStep = <span class="hljs-built_in">status</span>.damageTakenSince() <span class="hljs-comment">-- Returns the full buffer of damage notifications, throw this away, we only want the current step</span>

<span class="hljs-comment">-- stuff</span>

notifications,lastStep = <span class="hljs-built_in">status</span>.damageTakenSince(lastStep) <span class="hljs-comment">-- Get the damage notifications since the last call, and update the heartbeat</span>
</code></pre>
<hr>
<h4 id="listpairentityiddamagerequest-unsigned-statusinflictedhitssinceunsigned-since--0"><code>List&lt;pair&lt;EntityId,DamageRequest&gt;&gt;</code>, <code>unsigned</code> status.inflictedHitsSince([<code>unsigned</code> since = 0]])</h4>
<p>Returns two values:</p>
<ul>
<li>A list {{entityId, damageRequest}} for the entity's inflicted hits since the specified heartbeat.</li>
<li>The most recent heartbeat to be passed into the function again to get the inflicted hits since this function call.</li>
</ul>
<hr>
<h4 id="listdamagenotification-unsigned-statusinflicteddamagesinceunsigned-since--0"><code>List&lt;DamageNotification&gt;</code>, <code>unsigned</code> status.inflictedDamageSince([<code>unsigned</code> since = 0])</h4>
<p>Returns two values:</p>
<ul>
<li>A list of damage notifications for damage inflicted by the entity.</li>
<li>The most recent heartbeat to be passed into the function again to get the list of damage notifications since the last call.</li>
</ul>
<hr>
<h4 id="jsonarray-statusactiveuniquestatuseffectsummary"><code>JsonArray</code> status.activeUniqueStatusEffectSummary()</h4>
<p>Returns a list of two element tables describing all unique status effects currently active on the status controller. Each entry consists of the <code>String</code> name of the effect and a <code>float</code> between 0 and 1 indicating the remaining portion of that effect's duration.</p>
<hr>
<h4 id="bool-statusuniquestatuseffectactivestring-effectname"><code>bool</code> status.uniqueStatusEffectActive(<code>String</code> effectName)</h4>
<p>Returns <code>true</code> if the specified unique status effect is currently active and <code>false</code> otherwise.</p>
<hr>
<h4 id="string-statusprimarydirectives"><code>String</code> status.primaryDirectives()</h4>
<p>Returns the primary set of image processing directives applied to the animation of the entity using this status controller.</p>
<hr>
<h4 id="void-statussetprimarydirectivesstring-directives"><code>void</code> status.setPrimaryDirectives([<code>String</code> directives])</h4>
<p>Sets the primary set of image processing directives that should be applied to the animation of the entity using this status controller.</p>
<hr>
<h4 id="void-statusapplyselfdamagerequestdamagerequest-damagerequest"><code>void</code> status.applySelfDamageRequest(<code>DamageRequest</code> damageRequest)</h4>
<p>Directly applies the specified damage request to the entity using this status controller.</p>

        
        
    </body>
    </html>